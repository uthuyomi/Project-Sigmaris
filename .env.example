# Backend (FastAPI / persona_core)

# OpenAI
OPENAI_API_KEY=
SIGMARIS_PERSONA_MODEL=gpt-4.1
SIGMARIS_EMBEDDING_MODEL=text-embedding-3-small

# Debug / tracing
SIGMARIS_TRACE=1
SIGMARIS_TRACE_TEXT=0
# If set to 1, backend raises LLM errors (useful for debugging)
SIGMARIS_RAISE_LLM_ERRORS=0

# Supabase (optional: enable backend persistence via PostgREST)
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_ANON_KEY=
SUPABASE_SCHEMA=public

# Public deployment defaults
# - If Supabase is configured, auth is required by default.
SIGMARIS_REQUIRE_AUTH=1
# Comma-separated origins (e.g. https://your-ui.vercel.app,http://localhost:3000)
SIGMARIS_CORS_ORIGINS=

# Phase04: attachments / storage
SIGMARIS_STORAGE_BUCKET=sigmaris-attachments
SIGMARIS_UPLOAD_MAX_BYTES=5242880

# Phase04: enable kernel application (approved deltas -> snapshot/apply/rollback + DB persist)
SIGMARIS_PHASE04_KERNEL_APPLY=0

# Phase04: external I/O providers (optional)
SERPER_API_KEY=
GITHUB_TOKEN=

# Phase04: web fetch (optional; allows deeper URL analysis)
# Security: set allowlist for public deployments (prevents SSRF / abuse)
# SIGMARIS_WEB_FETCH_ALLOW_DOMAINS=nhk.or.jp,nikkei.com,asahi.com,yomiuri.co.jp
# SIGMARIS_WEB_FETCH_ALLOW_ALL=0
# SIGMARIS_WEB_FETCH_TIMEOUT_SEC=20
# SIGMARIS_WEB_FETCH_MAX_BYTES=1500000
# SIGMARIS_WEB_FETCH_USER_AGENT=sigmaris-core-web-fetch/1.0
# Summarization (uses OpenAI; paraphrase only)
# SIGMARIS_WEB_FETCH_SUMMARIZE=1
# SIGMARIS_WEB_FETCH_SUMMARY_MODEL=gpt-4o-mini
# SIGMARIS_WEB_FETCH_SUMMARY_TIMEOUT_SEC=60

# Phase04: natural-language auto browse (UI server routes)
# - When user asks to "search/news/source" without URLs, UI auto-calls /io/web/search and (optionally) /io/web/fetch.
# - Set to 0 to disable.
SIGMARIS_AUTO_BROWSE_ENABLED=1
SIGMARIS_AUTO_BROWSE_MAX_RESULTS=5
SIGMARIS_AUTO_BROWSE_FETCH_TOP=2
